// @ts-check

const canvas = document.querySelector('.canvas-container').appendChild(document.createElement("canvas"));
canvas.width = 600;
canvas.height = 500;
const ctx = canvas.getContext("2d");
ctx.font = "30px Comic Sans MS, Comic Sans";
ctx.textAlign = "center";
let pipeControl = false;
let flip = false;
let backwards = false;
let swingCopter = false;
let mode = 0;

let playerX = backwards ? canvas.width - 100 : 100,
  playerInitialY = 200,
  playerWidth = 68,
  playerHeight = 48,
  playerSpeed = backwards ? -4 : 4, // How fast the pipes move to the left
  jumpSpeed = flip ? 8 : -8,
  defaultGravity = flip ? -0.5 : 0.5,
  deathY = flip ? playerHeight : canvas.height,
  keyDown = false;

let poleWidth = 87,
  poleHeight = 381,
  poleGap = 150,
  minPoleY = poleHeight + poleGap / 2,
  maxPoleY = canvas.height - poleHeight - poleGap / 2,
  poleSpawn = backwards ? 0 - poleWidth : canvas.width;

function calculateMinMax() {
  minPoleY = poleHeight + poleGap / 2;
  maxPoleY = canvas.height - poleHeight - poleGap / 2;
  x = minPoleY;
  y = maxPoleY;

  minPoleY = Math.max(minPoleY, poleGap / 2 + 5);
  maxPoleY = Math.min(maxPoleY, canvas.height - poleGap / 2 + 5);

  if (y < x) {
    minPoleY = y;
    maxPoleY = x;
  }
}

calculateMinMax();

/**@param {boolean} newBackwards*/
function setBackwards(newBackwards) {
  backwards = newBackwards;
  playerX = backwards ? canvas.width - 100 : 100;
  playerSpeed = backwards ? 0 - Math.abs(playerSpeed) : Math.abs(playerSpeed);
  poleSpawn = backwards ? 0 - poleWidth : canvas.width;
}

/**@param {boolean} newFlipped*/
function setFlip(newFlipped) {
  flip = newFlipped;
  jumpSpeed = flip ? Math.abs(jumpSpeed) : 0 - Math.abs(jumpSpeed);
  defaultGravity = flip
    ? 0 - Math.abs(defaultGravity)
    : Math.abs(defaultGravity);
  deathY = flip ? playerHeight : canvas.height;
  console.log(defaultGravity);
}

/**@param {number} newGap  */
function setPoleGap(newGap) {
  poleGap = newGap;
  calculateMinMax();
}

let homeWidth = 460,
  homeHeight = 366;

const homeScreen = new Image(homeWidth, homeHeight);
homeScreen.src =
  "data:image/png;base64,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";

const bird1 = new Image(playerWidth, playerHeight);
bird1.src =
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAAwCAYAAACooNxlAAABb0lEQVR42u2ZIU5DQRBAf5MqBArBFSiiKIJBECq6SU/QK1SjKZoguQISRdIKmooaUlVE26QOh0AhcOSjd0J2Mpndj+CNm/R32rzMvM5u21XhuDg6rUvWn2+XrZz12hUBEIA0CURzxOShZ6oXhs9RPl0tks/3T87rnE6hQwACkLJApDM0R3zvHpOvD8b7JmfIkM97nUKHAAQgPiDWs4fcG57Gn64vtH5/ifLjwzNtD8nqFDoEIACxAZHOsO4B2kx7nUKHAAQg/wvIL3tA0ikyH/SvovxuepvcS7zOo0MAApC8QOrNTZS3OtemgvL91tCc4g25d8mzDR3CyADEBkTOUBhW4s7UVtB7PyLvWCdfr0UBBOEUOoSRAYgPiOYULe4vP6L8TTlqjGYHSWeEvW5RAOwhjAxAmgUiHeENWS/MukX3EM1JdAhAAJIXiPydHlXp/369jtGcknvvoEMYGYA0C0SbQc0xuT+PDgEIQP40fgDUyYOiZ1v97gAAAC10RVh0U29mdHdhcmUAYnkuYmxvb2RkeS5jcnlwdG8uaW1hZ2UuUE5HMjRFbmNvZGVyqAZ/7gAAAABJRU5ErkJggg==";

const bird2 = new Image(playerWidth, playerHeight);
bird2.src =
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAAwCAYAAACooNxlAAABcElEQVR42u2aoU4DQRCGr0kVAoXgFQDRKoJBEBDdpE/QV6hGUzRB8gpIFEkr2iAwTRUIIMHhEChEHTn0/mInm50tCfnGTe46l36Z+Tqba7epHCd7h23N+g9vq45nvW5DAAQgmwRiOWJ6e5ZVL4zmUT57ekzeP+gft55OoUMAApC6QNQZliN+3u+S14eT7SxnaOj9pU6hQwACEF8gljMsR+TGy+cyyg92j6w9xNUpdAhAAFIGRJ1xP/mu6gw6BCAA+d9A9KyRG+og6/pwcB7l17Or5F6Se/ahQwACEF8gund4z6SeNUqdUhr6ffVsQ4cwMgApA9K+XkZ5Z/8iq6B+Pjd075mun6sCCOIUOoSRAUgeEP0dDqNG3tXOix5wc/oV5R+y5owXO0lnhK1eVQDsIYwMQHyB6Ezp7q9OKA2tFxa9qnuI5SQ6BCAA8QWiThk36f+UlTrGcor33kGHMDIA2SwQawYtx3g/jw4BCED+NH4B/XeEPnfKBRMAAAAtdEVYdFNvZnR3YXJlAGJ5LmJsb29kZHkuY3J5cHRvLmltYWdlLlBORzI0RW5jb2RlcqgGf+4AAAAASUVORK5CYII=";

const bird3 = new Image(playerWidth, playerHeight);
bird3.src =
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAAwCAYAAACooNxlAAABbklEQVR42u2aoW4CQRBAjwSFgKZB9BdoBVVNTQWhgkv4gv4CuhqqG2R/AYlqcggIAkNQVBQSHK6iqqKOHKZmp8lNNjt76o2bsNmEl5l3s3dbTSJHp3WXx9x/ud9ULPerJgRAAFImEM0R2eTRa7/0ae7ks+2qcH3v9iG3dAoVAhCAxAUinaE54nSYFv7eH9W9nCFDrg91ChUCEIDYAtGcoTnCNz6/1k5+c3WvzSGmTqFCAAKQMCDSGe+jn6jOoEIAAhCAhIR0VL/37OTj2WvhXOJ79qFCAAKQcoHI9xWhjgh1SmjIOUuebagQWgYgfkC09x2V66HXhvnuxcnldxbNKdJZ2e9HVADp3/+/bFxQIbQMQAyA+DrjX08KZ7x1v538KI4eg0Wz0BlprR0VAHMILQOQcoFoc4Z0hhZyfbpoR51DNCdRIQABiB8Q+RyW30LLDs0p1nMHFULLAMQWSOg9z0Fie7fd+i47FQIQgJjGGV5PfWiacZtuAAAALXRFWHRTb2Z0d2FyZQBieS5ibG9vZGR5LmNyeXB0by5pbWFnZS5QTkcyNEVuY29kZXKoBn/uAAAAAElFTkSuQmCC";

const birds = [bird1, bird2, bird3, bird2];
let birdIndex = 0;

const deadBird = new Image(playerHeight, playerWidth);
deadBird.src =
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAABECAYAAADHsbZQAAAB2ElEQVRoQ+2aoU4EQRBE2ZAgECgEDkcCCFAEc4KA4BIUkl/gIzhPkPwCX0ByJyAIHAoUP4FCYEFPbTIvnc7u3h11bjKzs1NdVd0zc9usJH8nu0e/tSlePt+a5Cuqj6cnN4AkPf+PAZXM9OGsiGGzd1O0zw9H1RhnPRJmwACEDzNASYDS5Oz9tTqFeuBx8l2Mv5hsFO0oI+gBA5AsZAZEsC0JqWTuT7+KR66fN4t21gOrO5fFfOOrp5AnDMAMLLqEtIhEPTG4BwxAI9B3Gk0zQAvWF2gdiJ4HtBIbgBkIHikHlxB5QvtpwXQeobrQRCVkABRy6TcDFLDt0RoNSfV3zoABAD9mgNJmNM/rPRAZRPdaemYO1wHdzBkAUGAGWvv/n4/yHmf9oGjTzdvd7LYa8/2t46Kf/l9ADxiA3D6bgejd6BQ0T/0acdU41QHtV0/gvRAtkPoNQCgwA2PJ+yQhur2eew8YwNAeWDoGaG+jgHW8/o/ceR2gBamJabwBZNPowkuI8j5pXp/v3QMG0Pd2OloH5k5CJBntT38v1PomLnmgMQCIQOdZqHcG9IX0yRmdB6KajgJOfzNnANGQUx1YOglRgNQjXWse90K0YGLIAIIRxCxE8w0toT+NxLNLOWBmvQAAAABJRU5ErkJggg==";

const bg = new Image(960, 644);
bg.src =
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA8AAAAKECAYAAADIaFNVAAATO0lEQVR42u3dz4ocRRzAcQciZHGJ2UMgi0YQclAfwOMcAkEI5ORLeNOrT+DZmy/hSRAk4GHBiwfxtOYgCI5hgznsOqxuwMB6CcJU2Kmtre7qqq7P55Y/uztT/bPsb6abvvbZDz+dvwYAAAAzd80SAAAAIIABAABAAAMAAIAABgAAAAEMAAAAAhgAAAAEMAAAAAhgAAAAEMAAAAAIYAAAABDAAAAAIIABAABAAAMAAIAABgAAAAEMAAAAAhgAAAAEMAAAAAhgAAAABDAAAAAIYAAAABDAAAAAIIABAABAAAMAAIAABgAAAAEMAAAAAhgAAAAEMAAAAAIYAAAABDAAAAAIYAAAABDAAAAAIIABAABAAAMAAIAABgAAAAEMAAAAAhgAAAABDAAAAAIYAAAABDAAAAAIYAAAABDAAAAAIIABAABAAAMAAIAABgAAAAEMAACAAAYAAAABDAAAAAIYAAAABDAAAAAIYAAAABDAAAAAIIABAABAAAMAAIAABgAAQAADAACAAAYAAAABDAAAAAIYAAAABDAAAAAIYAAAABDAAAAAIIABAABAAAMAACCAAQAAQAADAACAAAYAAAABDAAAAAIYAAAABDAAAAAIYAAAABDAAAAAIIABAAAQwAAAACCAAQAAQAADAACAAAYAAAABDAAAAAIYAAAABDAAAAAIYAAAABDAAAAACGAAAAAQwAAAACCAAQAAQAADAACAAAYAAAABDAAAAAIYAAAABDAAAAACGAAAAAQwAAAACGAAAAAQwAAAACCAAQAAQAADAACAAAYAAAABDAAAAAIYAAAAAQwAAAACGAAAAAQwAAAACGAAAAAQwAAAACCAAQAAQAADAACAAAYAAAABDAAAgAAGAAAAAQwAAAACGAAAAAQwAAAACGAAAAAQwAAAACCAAQAAQAADAACAAAYAAEAAAwAAgAAGAAAAAQwAAAACGAAAAAQwAAAACGAAAAAQwAAAACCAAQAAQAADAAAggAEAAEAAAwAAgAAGAAAAAQwAAAACGAAAAAQwAAAACGAAAAAQwAAAACCAAQAAEMAAAAAggAEAAEAAAwAAgAAGAAAAAQwAAAACGAAAAAQwAAAACGAAAAAQwAAAAAhgAAAAEMAAAAAggAEAAEAAAwAAgAAGAAAAAQwAAAACGAAAAAQwAAAACGAAAAAEMAAAAAhgAAAAEMAAAAAggAEAAEAAAwAAgAAGAAAAAQwAAAACGAAAAAQwAAAAAhgAAAAEMAAAAAhgAAAAEMAAAAAggAEAAEAAAwAAgAAGAAAAAQwAAAACGAAAAAEMAAAAAhgAAAAEMAAAAAhgAAAAEMAAAAAggAEAAEAAAwAAgAAGAABAAAMAAIAABgAAAAEMAAAAAhgAAAAEMAAAAAhgAAAAEMAAAAAggAEAAEAAAwAAIIABAABAAAMAAIAABgAAAAEMAAAAAhgAAAAEMAAAAAhgAAAAEMAAAAAggAEAABDAAAAAIIABAABAAAMAAIAABgAAAAEMAAAAAhgAAAAEMAAAAAhgAAAAEMAAAAAIYAAAABDAAAAAIIABAABAAAMAAIAABgAAAAEMAAAAAhgAAAAEMAAAAAhgAAAABDAAAAAIYAAAABDAAAAAIIABAABAAAMAAIAABgAAAAEMAAAAAhgAAAAEMAAAAAIYAAAABDAAAAAIYAAAABDAAAAAIIABAABAAAMAAIAABgAAAAEMAAAAAhgAAAABDAAAAAIYAAAABDAAAAAIYAAAABDAAAAAIIABAABAAAMAAIAABgAAAAEMAACAAAYAAAABDAAAAAIYAAAABDAAAAAIYAAAABDAAAAAIIABAABAAAMAAIAABgAAQAADAACAAAYAAAABDAAAAAIYAAAABDAAAAAIYAAAABDAAAAAIIABAAAQwJYAAAAAAQwAAAACGAAAAAQwAAAACGAAAAAQwAAAACCAAQAAQAADAACAAAYAAEAAAwAAgAAGAAAAAQwAAAACGAAAAAQwAAAACGAAAAAQwAAAACCAAQAAQAADAAAggAEAAEAAAwAAgAAGAAAAAQwAAAACGAAAAAQwAAAACGAAAAAQwAAAACCAAQAAEMAAAAAggAEAAEAAAwAAgAAGAAAAAQwAAAACGAAAAAQwAAAACGAAAAAQwAAAAAhgAAAAEMAAAAAggAEAAEAAAwAAgAAGAAAAAQwAAAACGAAAAAQwAAAACGAAAAAEMAAAAAhgAAAAEMAAAAAggAEAAEAAAwAAgAAGAAAAAQwAAAACGAAAAAQwAAAAAhgAAAAEMAAAAAhgAAAAEMAAAAAggAEAAEAAAwAAgAAGAAAAAQwAAAACGAAAAAEMAAAAAhgAAAAEMAAAAAhg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";

const pipeBottomImg = new Image(poleWidth, poleHeight);
pipeBottomImg.src =
  "data:image/png;base64,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";

const pipeTopImg = new Image(poleWidth, poleHeight);
pipeTopImg.src =
  "data:image/png;base64,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";

const gameOver = new Image(400, 81);
gameOver.src =
  "data:image/png;base64,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";

let lastPerformance = performance.now();

let gravity = defaultGravity;
let fallSpeed = 0;
let playerY = playerInitialY;

let score = 0;
let highScore = 0;

/**@type {{x: number, y: number}[]}*/
let poles = [];

let hasCrashed = false;
let isOnHomeScreen = true;

let poleRate = 1500;

function drawBird() {
  ctx.save();
  ctx.translate(playerX + playerWidth / 2, playerY + playerHeight / 2);
  if (flip) ctx.scale(1, -1);
  if (backwards) ctx.scale(-1, 1);
  if (hasCrashed) {
    ctx.drawImage(
      deadBird,
      playerWidth / 2 - playerHeight,
      playerHeight / 2 - playerWidth
    );
  } else {
    ctx.drawImage(birds[birdIndex], 0 - playerWidth / 2, 0 - playerHeight / 2);
  }
  ctx.restore();
}

function drawScore() {
  ctx.fillText(score.toString(), canvas.width / 2, 50);
}

function drawPole({ x, y }) {
  ctx.drawImage(pipeTopImg, x, y - poleGap / 2 - poleHeight);
  ctx.drawImage(pipeBottomImg, x, y + poleGap / 2);
}

function removePoles() {
  let len = poles.length;
  poles = poles.filter((pole) =>
    backwards ? pole.x < canvas.width : pole.x + poleWidth > 0
  );
  score += len - poles.length;
}

function isDead() {
  return poles.some(({ x: poleX, y: poleY }) => {
    if (playerX + playerWidth > poleX && poleX + poleWidth > playerX) {
      return (
        playerY < poleY - poleGap / 2 ||
        playerY + playerHeight > poleY + poleGap / 2
      );
    }

    return false;
  });
}

/**
 * @param {number} newValue
 */
function setPolerate(newValue) {
  poleRate = newValue;
}

function home() {
  keyDown = false;
  ctx.drawImage(bg, 0, canvas.height - bg.height);
  ctx.drawImage(
    homeScreen,
    (canvas.width - homeScreen.width) / 2,
    canvas.height - homeScreen.height
  );
  if (!isOnHomeScreen) {
    lastPerformance = performance.now();
    score = 0;
    poles = [];
    requestAnimationFrame(frame);
  } else requestAnimationFrame(home);
}

function frame() {
  ctx.drawImage(bg, 0, canvas.height - bg.height);
  fallSpeed += gravity;
  if (!pipeControl || hasCrashed) playerY += fallSpeed;

  if (mode == 1 && keyDown) {
    fallSpeed -= gravity * 2;
    if (Math.abs(fallSpeed) > 10) fallSpeed = Math.sign(fallSpeed) * 10;
  }

  if (Math.abs(fallSpeed) > 10) fallSpeed = Math.sign(fallSpeed) * 10;

  poles.forEach(
    (pole) => (
      !hasCrashed
        ? ((pole.x -= playerSpeed), pipeControl ? (pole.y -= fallSpeed) : null)
        : null,
      drawPole(pole)
    )
  );

  drawScore();
  drawBird();

  removePoles();
  !hasCrashed && isDead() && (hasCrashed = true);
  if (
    (!flip && playerY + playerHeight > canvas.height) ||
    (flip && playerY <= 0)
  ) {
    ctx.drawImage(
      gameOver,
      (canvas.width - gameOver.width) / 2,
      (canvas.height - gameOver.height) / 2
    );

    setTimeout(() => {
      isOnHomeScreen = true;
      playerY = playerInitialY;
      gravity = defaultGravity;
      fallSpeed = 0;
      hasCrashed = false;
      
      home();
    }, 1000);
  } else {
    if (performance.now() - lastPerformance > poleRate) {
      newPole();
      lastPerformance = performance.now();
    }
    requestAnimationFrame(frame);
  }
}

function jump() {
  if (isOnHomeScreen) {
    isOnHomeScreen = false;
  }
  if (!hasCrashed) {
    mode == 2
      ? (setFlip(!flip), (gravity = defaultGravity))
      : mode == 1
      ? (keyDown = true)
      : ((fallSpeed = jumpSpeed), (gravity = defaultGravity));
  }
}

addEventListener("keydown", ({ key, repeat }) => {
  if (key == " " && !repeat) jump();
});
addEventListener("keyup", ({ key }) =>
  key === " " ? (keyDown = false) : null
);

canvas.addEventListener("mousedown", () => jump());
canvas.addEventListener("mouseup", () => (keyDown = false));

const newPole = () =>
  poles.push({
    x: poleSpawn,
    y: minPoleY + Math.round(Math.random() * (maxPoleY - minPoleY)),
  });

setInterval(() => (birdIndex = (birdIndex + 1) % 4), 100);
home();
